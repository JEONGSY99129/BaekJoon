<1의 개수 세기>
시간 제한 : 1초
메모리 제한 : 128MB
정답 비율 : 35.613%

[문제]
두 자연수 A, B가 주어졌을 때, A ≤ x ≤ B를 만족하는 모든 x에 대해 x를 이진수로 표현했을 때 1의 개수의 합을 구하는 프로그램을 작성하시오.
즉, f(x) = x를 이진수로 표현 했을 때 1의 개수라고 정의하고, 아래 식의 결과를 구하자.
(식은 https://www.acmicpc.net/problem/9527 참고)

[입력]
첫 줄에 두 자연수 A, B가 주어진다. (1 ≤ A ≤ B ≤ 1016)

[출력]
1의 개수를 세어 출력한다.

[예제 입력 1]
2 12

[예제 출력 1]
21



[작성한 코드]


#include<iostream>
#define _CRT_SECURE_NO_WARNINGS
using namespace std;

long long f(long long A) {

	if (A <= 0) {
		return 0;
	}
	long long tmp = A;
	int length;
	for (length = 0; tmp != 0; ) {
		tmp = tmp >> 1;
		length++;
	}//A의 이진수 자릿수 세기
	
	long long msb = A - (long long)pow(2, length-1)+1; //A와 A의 이진수 자릿수와 같은 수 중에서 제일 작은 수 사이의 숫자 개수(최상위 비트 1의 개수)

	long long countnum = ((long long)length - 1) * (long long)pow(2, length - 2);

	long long NextHighestnum = f(B- (long long)pow(2, length - 1));

	

	return msb + countnum +NextHighestnum;
}

int main() {
	long long A, B;
	cin >> A >> B;

	if ((A < 1) || (A > 10000000000000000) || (B < A) || (B > 10000000000000000)) {
		cout << "input error" << endl;
		return 0;
	}
	cout << f(B)-f(A-1) << endl;
}
